local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")

if game.GameId ~= 210851291 then
	pcall(function()
		Players.LocalPlayer:Kick("este script sÃ³ funciona no Build a boat.")
	end)
	return
end

local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MangaHubMinimizeButton"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = CoreGui

local Button = Instance.new("TextButton")
Button.Size = isMobile and UDim2.fromOffset(30, 30) or UDim2.fromOffset(50, 50)
Button.Position = UDim2.new(0, 50, 0, 50)
Button.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
Button.Text = "ðŸ¥­"
Button.TextScaled = true
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.BorderSizePixel = 0
Button.AnchorPoint = Vector2.new(0.5, 0.5)
Button.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(1, 0)
UICorner.Parent = Button

local dragging, dragInput, dragStart, startPos
local function update(input)
	local delta = input.Position - dragStart
	Button.Position = UDim2.new(
		startPos.X.Scale, startPos.X.Offset + delta.X,
		startPos.Y.Scale, startPos.Y.Offset + delta.Y
	)
end

Button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = Button.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

Button.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

getgenv().MangaHubWindow = nil
local minimized = false

Button.MouseButton1Click:Connect(function()
	if getgenv().MangaHubWindow then
		if minimized then
			getgenv().MangaHubWindow:Show()
			getgenv().MangaHubWindow.Frame.Visible = true
			minimized = false
		else
			getgenv().MangaHubWindow:Minimize()
			getgenv().MangaHubWindow.Frame.Visible = false
			minimized = true
		end
	end
end)

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local windowSize = isMobile and UDim2.fromOffset(400, 350) or UDim2.fromOffset(580, 460)
local tabWidth = isMobile and 120 or 160

local Window = Fluent:CreateWindow({
	Title = "Manga Hub",
	SubTitle = "ProteÃ§Ãµes",
	TabWidth = tabWidth,
	Size = windowSize,
	Acrylic = true,
	Theme = "Dark",
	MinimizeKey = Enum.KeyCode.LeftControl
})

getgenv().MangaHubWindow = Window

local Tabs = {
	Mar = Window:AddTab({ Title = "Mar", Icon = "ðŸŒŠ" })
}

local Options = Fluent.Options

local function getWater()
	return workspace:FindFirstChild("Water", true)
end

Tabs.Mar:AddToggle("NoSeaDeath", {
	Title = "NÃ£o morrer pro mar",
	Default = false
})

Options.NoSeaDeath:OnChanged(function(Value)
	local water = getWater()
	if water and water:IsA("BasePart") then
		water.CanTouch = not Value
	end
end)

Window:SelectTab(1)

Fluent:Notify({
	Title = "Manga Hub",
	Content = "Script carregado com sucesso!",
	Duration = 5
})
